"use strict";(self.webpackChunkfei_jetracer_docs=self.webpackChunkfei_jetracer_docs||[]).push([[837],{1233:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"movement-control/movement_control","title":"Robot Movement Control","description":"JetRacer ROS Kit User Guide","source":"@site/docs/movement-control/movement_control.md","sourceDirName":"movement-control","slug":"/movement-control/movement_control","permalink":"/FEI_jetracer/sk/docs/movement-control/movement_control","draft":false,"unlisted":false,"editUrl":"https://github.com/peter115342/FEI_jetracer/tree/main/fei-jetracer-docs/docs/movement-control/movement_control.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Multi-Machine Communication Setup","permalink":"/FEI_jetracer/sk/docs/communication/"}}');var r=o(4848),i=o(8453);const a={sidebar_position:6},s="Robot Movement Control",l={},c=[{value:"JetRacer ROS Kit User Guide",id:"jetracer-ros-kit-user-guide",level:2},{value:"Step 1: Add serial User Group",id:"step-1-add-serial-user-group",level:2},{value:"Step 2: Start the robot chassis control node",id:"step-2-start-the-robot-chassis-control-node",level:2},{value:"Step 3: Start Topic Publishing Node Control",id:"step-3-start-topic-publishing-node-control",level:2},{value:"Step 4: Control the Robot Movement with Keyboard",id:"step-4-control-the-robot-movement-with-keyboard",level:2},{value:"Step 5: Connect the Virtual Machine to the Gamepad Control",id:"step-5-connect-the-virtual-machine-to-the-gamepad-control",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Robot Doesn&#39;t Move",id:"robot-doesnt-move",level:3},{value:"Gamepad Not Recognized",id:"gamepad-not-recognized",level:3},{value:"References",id:"references",level:2}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"robot-movement-control",children:"Robot Movement Control"})}),"\n",(0,r.jsx)(t.h2,{id:"jetracer-ros-kit-user-guide",children:"JetRacer ROS Kit User Guide"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.waveshare.com/wiki/JetRacer_ROS_AI_Kit_Tutorial_I:_Assembly_Manual",children:"JetRacer ROS Kit Tutorial I: How to assemble the JetRacer"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.waveshare.com/wiki/JetRacer_ROS_AI_Kit_Tutorial_II:_Install_Jetson_Nano_Image",children:"JetRacer ROS Kit Tutorial II: How to Install the Jetson Nano Image"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.waveshare.com/wiki/JetRacer_ROS_AI_Kit_Tutorial_III:_Install_Ubuntu_Virtual_Image",children:"JetRacer ROS Kit Tutorial III: How to install Ubuntu Virtual Image"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.waveshare.com/wiki/JetRacer_ROS_AI_Kit_Tutorial_IV:_Configure_Multi-machine_Communication",children:"JetRacer ROS Kit Tutorial IV: How to congifure multi-machine communication"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.waveshare.com/wiki/JetRacer_ROS_AI_Kit_Tutorial_V:_Robot_Movement_Control",children:"JetRacer ROS Kit Tutorial V: Robot Movement Control"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.waveshare.com/wiki/JetRacer_ROS_AI_Kit_Tutorial_VI:_View_Node_Topics_With_ROS",children:"JetRacer ROS Kit Tutorial VI: View Node Topics With ROS"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.waveshare.com/wiki/JetRacer_ROS_AI_Kit_Tutorial_VII:_Robot_Odometer_Calibration",children:"JetRacer ROS Kit Tutorial VII: Robot Odometer Calibration"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.waveshare.com/wiki/JetRacer_ROS_AI_Kit_Tutorial_VIII:_Start_the_Camera_Node",children:"JetRacer ROS Kit Tutorial VIII: Start the Camera Node"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.waveshare.com/wiki/JetRacer_ROS_AI_Kit_Tutorial_%E2%85%A8:_Enable_the_Lidar_Node",children:"JetRacer ROS Kit Tutorial IX: Enable the Lidar Node"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.waveshare.com/wiki/JetRacer_ROS_AI_Kit",children:"JetRacer Main Page"})}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"step-1-add-serial-user-group",children:"Step 1: Add serial User Group"}),"\n",(0,r.jsx)(t.p,{children:"Enter the command ls /dev in jetson nano to check whether the driver board is connected to Jetson normally and whether ttyACM0 and ttyACM1 devices are found \u3010where ttyACM0 is used to communicate with the microcontroller, and ttyACM1 is used to communicate with the radar\u3011."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"ls /dev\n"})}),"\n",(0,r.jsx)(t.p,{children:"Enter the following command to add the serial port user group, otherwise, you will not have permission to operate the serial port. Using the configured system has already added permissions, you can skip this step."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"ls -l /dev/ttyACM*             #View the serial port user group as dialout\nid -Gn                         #View the user group that the current user belongs to, the first one is the current user\nsudo adduser jetbot dialout    #Add the current user to the user group dialout where the serial port is located\n"})}),"\n",(0,r.jsx)(t.p,{children:'Enter the command "sudo reboot" to restart, the password is jetson \u3010Note: The above addition command can take effect only after restarting, and when there is no serial port permission, the robot chassis node will always report an error after booting up\u3011.'}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"sudo reboot\n"})}),"\n",(0,r.jsx)(t.h2,{id:"step-2-start-the-robot-chassis-control-node",children:"Step 2: Start the robot chassis control node"}),"\n",(0,r.jsx)(t.p,{children:"Connect SSH to the robot to open the terminal and enter the following command to start the robot master node."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"roscore\n"})}),"\n",(0,r.jsx)(t.p,{children:"The following roslaunch command will also automatically start the master node, but the purpose of starting the master node alone is to keep connected to the virtual machine all the time. Otherwise, the master node will be automatically closed when the chassis node is closed, resulting in the virtual machine being disconnected.\nEnter the following command to start the robot chassis node."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"roslaunch jetracer jetracer.launch\n"})}),"\n",(0,r.jsx)(t.p,{children:"Open the Ubuntu virtual machine terminal and enter the following command in the terminal to verify that the multi-machine communication connection is normal."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"rostopic list\n"})}),"\n",(0,r.jsx)(t.p,{children:"If this is the content you get after running the command,it means that the multi-device communication is successful:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"/cmd_vel is the topic about robot movement and is controlled by the robot."}),"\n",(0,r.jsx)(t.li,{children:"/imu is the robot IMU topic."}),"\n",(0,r.jsx)(t.li,{children:"/motor/* indicates the actual encoded speed and set the speed of the left and right motors."}),"\n",(0,r.jsx)(t.li,{children:"/odom encodes the odometer for the robot."}),"\n",(0,r.jsx)(t.li,{children:"/odom_combined is the robot fusion odometer, which is obtained by combining the encoded odometer with IMU data."}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"step-3-start-topic-publishing-node-control",children:"Step 3: Start Topic Publishing Node Control"}),"\n",(0,r.jsx)(t.p,{children:"You can publish topics through the Ubuntu virtual machine to control the movement of the robot."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"rosrun rqt_publisher rqt_publisher\n"})}),"\n",(0,r.jsx)(t.p,{children:'In the pop-up window, please select the topic /cmd_vel, and click "+" to create a new topic, /cmd_vel is the topic of controlling the motion of the robot, linear->x indicates the linear speed of the robot, and the range is -1.2m/s~1.2m/ s, angular->x represents the steering angle of the front tire of the robot, not the angular velocity, ranging from -0.6 radians to 0.6 radians.\nChange the value of linear.x to 0.5, right-click and select publish selected Once to publish a topic, the robot will move forward 0.5 meters and then stop; if linear.x is changed to 0, angular. z is changed to 0.6, the robot will turn left maximum angle of motion.'}),"\n",(0,r.jsx)(t.p,{children:"Note: The topic we open here is cmd_vel, select Twist type, and select other topics, the car may not move."}),"\n",(0,r.jsx)(t.h2,{id:"step-4-control-the-robot-movement-with-keyboard",children:"Step 4: Control the Robot Movement with Keyboard"}),"\n",(0,r.jsx)(t.p,{children:"Open a new terminal, run the keyboard control node to control the robot movement with the keyboard."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"roslaunch jetracer keyboard.launch\n"})}),"\n",(0,r.jsx)(t.p,{children:"After successful operation, an interface appears displaying the control mapping, and you can control the robot movement by pressing the keyboard."}),"\n",(0,r.jsx)(t.h2,{id:"step-5-connect-the-virtual-machine-to-the-gamepad-control",children:"Step 5: Connect the Virtual Machine to the Gamepad Control"}),"\n",(0,r.jsx)(t.p,{children:"Connect the USB receiver of the gamepad to the host computer, and a box will pop up, select Connect to Virtual Machine -> Ubuntu JetRacer"}),"\n",(0,r.jsx)(t.p,{children:"Run the following command in the virtual machine to test whether the gamepad is connected normally(you should see a js0 input device)."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"ls /dev/input/\n"})}),"\n",(0,r.jsx)(t.p,{children:"Test the input of the gamepad using the following command"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"jstest /dev/input/js0\n"})}),"\n",(0,r.jsx)(t.p,{children:"Press different buttons on the gamepad, and see the corresponding values change."}),"\n",(0,r.jsx)(t.p,{children:"Start the joystick node."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"roslaunch jetracer joy.launch\n"})}),"\n",(0,r.jsx)(t.p,{children:"Turn on the gamepad, press the HOME button and a red light will be on, then press and hold the L1 button in the upper left corner, and at the same time control the left joystick left and right directions to control the steering of the robot's servos, and the right joystick up and down to control the robot to move forward and backward. Release the L1 key, and the robot stops."}),"\n",(0,r.jsx)(t.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(t.h3,{id:"robot-doesnt-move",children:"Robot Doesn't Move"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"Verify the battery is charged"}),"\n",(0,r.jsx)(t.li,{children:"Ensure the controller node is running on the Jetson Nano"}),"\n",(0,r.jsx)(t.li,{children:"Check for any error messages in the terminal"}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"gamepad-not-recognized",children:"Gamepad Not Recognized"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"Verify the gamepad is properly connected to the host PC"}),"\n",(0,r.jsx)(t.li,{children:"Ensure the VM has access to the USB device"}),"\n",(0,r.jsx)(t.li,{children:"Check if the correct joystick device is being used (e.g., /dev/input/js0)"}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"references",children:"References"}),"\n",(0,r.jsxs)(t.p,{children:["For more detailed instructions, refer to the ",(0,r.jsx)(t.a,{href:"https://www.waveshare.com/wiki/JetRacer_ROS_AI_Kit_Tutorial_V%3A_Robot_Movement_Control",children:"official Waveshare JetRacer ROS AI Kit Tutorial V: Robot Movement Control"}),"."]})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,t,o)=>{o.d(t,{R:()=>a,x:()=>s});var n=o(6540);const r={},i=n.createContext(r);function a(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);