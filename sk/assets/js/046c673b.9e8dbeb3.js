"use strict";(self.webpackChunkfei_jetracer_docs=self.webpackChunkfei_jetracer_docs||[]).push([[484],{1487:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>d,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"communication/communication","title":"Multi-Machine Communication Setup","description":"After installing Ubuntu VM on your host PC, the next step is to configure multi-machine communication between your host VM and the Jetson Nano. This allows your development computer to interact with the JetRacer remotely.","source":"@site/docs/communication/communication.md","sourceDirName":"communication","slug":"/communication/","permalink":"/FEI_jetracer/sk/docs/communication/","draft":false,"unlisted":false,"editUrl":"https://github.com/peter115342/FEI_jetracer/tree/main/fei-jetracer-docs/docs/communication/communication.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Installing Ubuntu Virtual Machine on Host PC","permalink":"/FEI_jetracer/sk/docs/installation/installation_host"},"next":{"title":"Robot Movement Control","permalink":"/FEI_jetracer/sk/docs/movement-control/movement_control"}}');var o=s(4848),i=s(8453);const r={sidebar_position:5},l="Multi-Machine Communication Setup",a={},c=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Determine IP Addresses",id:"step-1-determine-ip-addresses",level:2},{value:"On Jetson Nano:",id:"on-jetson-nano",level:3},{value:"On Ubuntu VM:",id:"on-ubuntu-vm",level:3},{value:"Step 2: Configure Hosts File on Both Machines",id:"step-2-configure-hosts-file-on-both-machines",level:2},{value:"On Jetson Nano:",id:"on-jetson-nano-1",level:3},{value:"On Ubuntu VM:",id:"on-ubuntu-vm-1",level:3},{value:"Step 3: Configure ROS Environment Variables",id:"step-3-configure-ros-environment-variables",level:2},{value:"On Jetson Nano (ROS Master):",id:"on-jetson-nano-ros-master",level:3},{value:"On Ubuntu VM:",id:"on-ubuntu-vm-2",level:3},{value:"Step 4: Test the Communication",id:"step-4-test-the-communication",level:2},{value:"On Jetson Nano:",id:"on-jetson-nano-2",level:3},{value:"On Ubuntu VM:",id:"on-ubuntu-vm-3",level:3},{value:"Step 5: Run a Test Example",id:"step-5-run-a-test-example",level:2},{value:"On Jetson Nano:",id:"on-jetson-nano-3",level:3},{value:"On Ubuntu VM:",id:"on-ubuntu-vm-4",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Cannot Connect to ROS Master",id:"cannot-connect-to-ros-master",level:3},{value:"Connection Timeouts",id:"connection-timeouts",level:3},{value:"References",id:"references",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"multi-machine-communication-setup",children:"Multi-Machine Communication Setup"})}),"\n",(0,o.jsxs)(n.p,{children:["After ",(0,o.jsx)(n.a,{href:"/docs/installation/installation_host",children:"installing Ubuntu VM on your host PC"}),", the next step is to configure multi-machine communication between your host VM and the Jetson Nano. This allows your development computer to interact with the JetRacer remotely."]}),"\n",(0,o.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsx)(n.p,{children:"ROS (Robot Operating System) is designed to work across multiple machines, allowing you to:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Run resource-intensive computations on your more powerful host PC"}),"\n",(0,o.jsx)(n.li,{children:"Control the JetRacer remotely"}),"\n",(0,o.jsx)(n.li,{children:"Visualize sensor data and debug information on your development machine"}),"\n",(0,o.jsx)(n.li,{children:"Deploy code seamlessly between development and robot environments"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"In this guide, you'll learn how to:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Configure network settings on both machines"}),"\n",(0,o.jsx)(n.li,{children:"Set up ROS environment variables"}),"\n",(0,o.jsx)(n.li,{children:"Test the multi-machine communication"}),"\n",(0,o.jsx)(n.li,{children:"Troubleshoot common issues"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Jetson Nano with ROS installed and connected to your network"}),"\n",(0,o.jsx)(n.li,{children:"Ubuntu VM running on your host PC"}),"\n",(0,o.jsx)(n.li,{children:"Both machines connected to the same network"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"step-1-determine-ip-addresses",children:"Step 1: Determine IP Addresses"}),"\n",(0,o.jsx)(n.p,{children:"First, you need to know the IP addresses of both machines:"}),"\n",(0,o.jsx)(n.h3,{id:"on-jetson-nano",children:"On Jetson Nano:"}),"\n",(0,o.jsxs)(n.p,{children:["Look at the OLED display of the mainboard to see the IP (e.g., ",(0,o.jsx)(n.code,{children:"192.168.1.100"}),")."]}),"\n",(0,o.jsx)(n.h3,{id:"on-ubuntu-vm",children:"On Ubuntu VM:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"ifconfig\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Look for the ",(0,o.jsx)(n.code,{children:"ens33"})," or similar interface and note the IP address (e.g., ",(0,o.jsx)(n.code,{children:"192.168.1.200"}),")."]}),"\n",(0,o.jsx)(n.h2,{id:"step-2-configure-hosts-file-on-both-machines",children:"Step 2: Configure Hosts File on Both Machines"}),"\n",(0,o.jsx)(n.p,{children:"You'll need to edit the hosts file on both machines to enable hostname resolution:"}),"\n",(0,o.jsx)(n.h3,{id:"on-jetson-nano-1",children:"On Jetson Nano:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo nano /etc/hosts\n"})}),"\n",(0,o.jsx)(n.p,{children:"Add the following lines:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"127.0.0.1       localhost\n127.0.1.1       jetson\n192.168.1.100   jetson    # Your Jetson Nano's IP\n192.168.1.200   ubuntu    # Your Ubuntu VM's IP\n"})}),"\n",(0,o.jsx)(n.p,{children:"Save and exit (Ctrl+X, then Y, then Enter)."}),"\n",(0,o.jsx)(n.h3,{id:"on-ubuntu-vm-1",children:"On Ubuntu VM:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo nano /etc/hosts\n"})}),"\n",(0,o.jsx)(n.p,{children:"Add the following lines:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"127.0.0.1       localhost\n127.0.1.1       ubuntu\n192.168.1.100   jetson    # Your Jetson Nano's IP\n192.168.1.200   ubuntu    # Your Ubuntu VM's IP\n"})}),"\n",(0,o.jsx)(n.p,{children:"Save and exit."}),"\n",(0,o.jsx)(n.h2,{id:"step-3-configure-ros-environment-variables",children:"Step 3: Configure ROS Environment Variables"}),"\n",(0,o.jsx)(n.p,{children:"ROS needs to know which machine is the master and how to communicate between machines:"}),"\n",(0,o.jsx)(n.h3,{id:"on-jetson-nano-ros-master",children:"On Jetson Nano (ROS Master):"}),"\n",(0,o.jsxs)(n.p,{children:["Edit the ",(0,o.jsx)(n.code,{children:".bashrc"})," file:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"nano ~/.bashrc\n"})}),"\n",(0,o.jsx)(n.p,{children:"Add these lines at the end:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"export ROS_MASTER_URI=http://jetson:11311\nexport ROS_HOSTNAME=jetson\n"})}),"\n",(0,o.jsx)(n.p,{children:"Apply the changes:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"source ~/.bashrc\n"})}),"\n",(0,o.jsx)(n.h3,{id:"on-ubuntu-vm-2",children:"On Ubuntu VM:"}),"\n",(0,o.jsxs)(n.p,{children:["Edit the ",(0,o.jsx)(n.code,{children:".bashrc"})," file:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"nano ~/.bashrc\n"})}),"\n",(0,o.jsx)(n.p,{children:"Add these lines at the end:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"export ROS_MASTER_URI=http://jetson:11311\nexport ROS_HOSTNAME=ubuntu\n"})}),"\n",(0,o.jsx)(n.p,{children:"Apply the changes:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"source ~/.bashrc\n"})}),"\n",(0,o.jsx)(n.h2,{id:"step-4-test-the-communication",children:"Step 4: Test the Communication"}),"\n",(0,o.jsx)(n.p,{children:"Now let's test if the multi-machine communication is working:"}),"\n",(0,o.jsx)(n.h3,{id:"on-jetson-nano-2",children:"On Jetson Nano:"}),"\n",(0,o.jsx)(n.p,{children:"Start the ROS master:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"roscore\n"})}),"\n",(0,o.jsx)(n.h3,{id:"on-ubuntu-vm-3",children:"On Ubuntu VM:"}),"\n",(0,o.jsx)(n.p,{children:"Check if you can see the ROS master:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"rostopic list\n"})}),"\n",(0,o.jsxs)(n.p,{children:["If you see a list of topics (even if it's just ",(0,o.jsx)(n.code,{children:"/rosout"})," and ",(0,o.jsx)(n.code,{children:"/rosout_agg"}),"), the communication is working!"]}),"\n",(0,o.jsx)(n.h2,{id:"step-5-run-a-test-example",children:"Step 5: Run a Test Example"}),"\n",(0,o.jsx)(n.p,{children:"Let's run a simple publisher/subscriber example to verify the communication:"}),"\n",(0,o.jsx)(n.h3,{id:"on-jetson-nano-3",children:"On Jetson Nano:"}),"\n",(0,o.jsx)(n.p,{children:"Start an example receiving node:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"rosrun rospy_tutorials listener\n"})}),"\n",(0,o.jsx)(n.h3,{id:"on-ubuntu-vm-4",children:"On Ubuntu VM:"}),"\n",(0,o.jsx)(n.p,{children:"Start an publishing receiving node:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"rosrun rospy_tutorials talker\n"})}),"\n",(0,o.jsx)(n.p,{children:'You should see "hello world" messages appearing repeatedly being received on the Jetson side.'}),"\n",(0,o.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,o.jsx)(n.h3,{id:"cannot-connect-to-ros-master",children:"Cannot Connect to ROS Master"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Verify both machines can ping each other:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"ping jetson  # From Ubuntu VM\nping ubuntu  # From Jetson Nano\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Verify ROS environment variables:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"echo $ROS_MASTER_URI\necho $ROS_HOSTNAME\n"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"connection-timeouts",children:"Connection Timeouts"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Make sure both machines are on the same network"}),"\n",(0,o.jsx)(n.li,{children:"Check if the IP addresses have changed (common with DHCP)"}),"\n",(0,o.jsx)(n.li,{children:"Update the hosts file if IP addresses change"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,o.jsxs)(n.p,{children:["For more detailed instructions, refer to the ",(0,o.jsx)(n.a,{href:"https://www.waveshare.com/wiki/JetRacer_ROS_AI_Kit_Tutorial_IV%3A_Configure_Multi-machine_Communication",children:"official Waveshare JetRacer ROS AI Kit Tutorial IV"}),"."]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>l});var t=s(6540);const o={},i=t.createContext(o);function r(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);