"use strict";(self.webpackChunkfei_jetracer_docs=self.webpackChunkfei_jetracer_docs||[]).push([[501],{2662:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>t});const a=JSON.parse('{"id":"FEIcar/object_detection","title":"Detekcia objektov s OpenCV a CUDA","description":"Tento n\xe1vod pokr\xfdva nastavenie schopnost\xed detekcie objektov na va\u0161om FEI JetRacer pomocou OpenCV s CUDA akceler\xe1ciou a YOLOv4-Tiny pre v\xfdkon v re\xe1lnom \u010dase.","source":"@site/i18n/sk/docusaurus-plugin-content-docs/current/FEIcar/object_detection.md","sourceDirName":"FEIcar","slug":"/FEIcar/object_detection","permalink":"/FEI_jetracer/sk/docs/FEIcar/object_detection","draft":false,"unlisted":false,"editUrl":"https://github.com/peter115342/FEI_jetracer/tree/main/fei-jetracer-docs/docs/FEIcar/object_detection.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9},"sidebar":"tutorialSidebar","previous":{"title":"In\u0161tal\xe1cia FEI DonkeyCar(FEIcar) na Jetson Nano","permalink":"/FEI_jetracer/sk/docs/FEIcar/FEIcar_installation"}}');var s=i(4848),o=i(8453);const r={sidebar_position:9},l="Detekcia objektov s OpenCV a CUDA",c={},t=[{value:"Preh\u013ead",id:"preh\u013ead",level:2},{value:"Pozn\xe1mka",id:"pozn\xe1mka",level:2},{value:"Manu\xe1lna in\u0161tal\xe1cia",id:"manu\xe1lna-in\u0161tal\xe1cia",level:2},{value:"Krok 1: In\u0161tal\xe1cia OpenCV s podporou CUDA",id:"krok-1-in\u0161tal\xe1cia-opencv-s-podporou-cuda",level:3},{value:"Stiahnutie in\u0161tala\u010dn\xe9ho skriptu",id:"stiahnutie-in\u0161tala\u010dn\xe9ho-skriptu",level:4},{value:"Pr\xedprava v\xe1\u0161ho syst\xe9mu",id:"pr\xedprava-v\xe1\u0161ho-syst\xe9mu",level:4},{value:"Spustenie in\u0161tala\u010dn\xe9ho skriptu",id:"spustenie-in\u0161tala\u010dn\xe9ho-skriptu",level:4},{value:"Overenie in\u0161tal\xe1cie",id:"overenie-in\u0161tal\xe1cie",level:4},{value:"Krok 2: Konfigur\xe1cia prostredia",id:"krok-2-konfigur\xe1cia-prostredia",level:3},{value:"Krok 3: Nastavenie YOLOv4-Tiny",id:"krok-3-nastavenie-yolov4-tiny",level:2},{value:"Vytvorenie adres\xe1ra modelov",id:"vytvorenie-adres\xe1ra-modelov",level:3},{value:"Stiahnutie s\xfaborov YOLOv4-Tiny",id:"stiahnutie-s\xfaborov-yolov4-tiny",level:3},{value:"Overenie s\xfaborov modelu",id:"overenie-s\xfaborov-modelu",level:3},{value:"Test detekcie objektov",id:"test-detekcie-objektov",level:3},{value:"Tipy na v\xfdkon",id:"tipy-na-v\xfdkon",level:2},{value:"Optimaliz\xe1cia pre v\xfdkon v re\xe1lnom \u010dase",id:"optimaliz\xe1cia-pre-v\xfdkon-v-re\xe1lnom-\u010dase",level:3},{value:"Rie\u0161enie probl\xe9mov",id:"rie\u0161enie-probl\xe9mov",level:2},{value:"Probl\xe9my s in\u0161tal\xe1ciou OpenCV",id:"probl\xe9my-s-in\u0161tal\xe1ciou-opencv",level:3},{value:"CUDA nefunguje",id:"cuda-nefunguje",level:3},{value:"Chyby na\u010d\xedtania modelu",id:"chyby-na\u010d\xedtania-modelu",level:3},{value:"Referencie",id:"referencie",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"detekcia-objektov-s-opencv-a-cuda",children:"Detekcia objektov s OpenCV a CUDA"})}),"\n",(0,s.jsx)(n.p,{children:"Tento n\xe1vod pokr\xfdva nastavenie schopnost\xed detekcie objektov na va\u0161om FEI JetRacer pomocou OpenCV s CUDA akceler\xe1ciou a YOLOv4-Tiny pre v\xfdkon v re\xe1lnom \u010dase."}),"\n",(0,s.jsx)(n.h2,{id:"preh\u013ead",children:"Preh\u013ead"}),"\n",(0,s.jsx)(n.p,{children:"Pou\u017eijeme:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"OpenCV s CUDA"}),": Pre akcelerovan\xe9 oper\xe1cie po\u010d\xedta\u010dov\xe9ho videnia"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"YOLOv4-Tiny"}),": \u013dahk\xfd model detekcie objektov optimalizovan\xfd pre embedded zariadenia"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"cuDNN"}),": NVIDIA kni\u017enica pre akceler\xe1ciu hlbok\xe9ho u\u010denia"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"pozn\xe1mka",children:"Pozn\xe1mka"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Ak pou\u017e\xedvate n\xe1\u0161 predkonfigurovan\xfd JetRacer image, \u010das\u0165 tohto nastavenia je u\u017e kompletn\xe1!"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["M\xf4\u017eete presko\u010di\u0165 kroky in\u0161tal\xe1cie OpenCV s podporou CUDA ni\u017e\u0161ie a prejs\u0165 priamo na ",(0,s.jsx)(n.a,{href:"#overenie-in%C5%A1tal%C3%A1cie",children:"Overenie in\u0161tal\xe1cie"}),"."]})}),"\n",(0,s.jsx)(n.h2,{id:"manu\xe1lna-in\u0161tal\xe1cia",children:"Manu\xe1lna in\u0161tal\xe1cia"}),"\n",(0,s.jsx)(n.h3,{id:"krok-1-in\u0161tal\xe1cia-opencv-s-podporou-cuda",children:"Krok 1: In\u0161tal\xe1cia OpenCV s podporou CUDA"}),"\n",(0,s.jsx)(n.p,{children:"Pou\u017eijeme in\u0161tala\u010dn\xfd skript Qengineering, ktor\xfd automatizuje komplexn\xfd proces buildovania OpenCV s podporou CUDA a cuDNN."}),"\n",(0,s.jsx)(n.h4,{id:"stiahnutie-in\u0161tala\u010dn\xe9ho-skriptu",children:"Stiahnutie in\u0161tala\u010dn\xe9ho skriptu"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd ~\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/Qengineering/Install-OpenCV-Jetson-Nano.git\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd Install-OpenCV-Jetson-Nano\n"})}),"\n",(0,s.jsx)(n.h4,{id:"pr\xedprava-v\xe1\u0161ho-syst\xe9mu",children:"Pr\xedprava v\xe1\u0161ho syst\xe9mu"}),"\n",(0,s.jsx)(n.p,{children:"Pred spusten\xedm in\u0161tala\u010dn\xe9ho skriptu sa uistite, \u017ee je v\xe1\u0161 syst\xe9m pripraven\xfd:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt update && sudo apt upgrade -y\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt autoremove -y\n"})}),"\n",(0,s.jsx)(n.p,{children:"Uvo\u013enite miesto na disku a zv\xfd\u0161te swap:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo systemctl disable nvzramconfig\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo fallocate -l 4G /var/swapfile\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo chmod 600 /var/swapfile\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo mkswap /var/swapfile\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo swapon /var/swapfile\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo swapon -s\n"})}),"\n",(0,s.jsx)(n.h4,{id:"spustenie-in\u0161tala\u010dn\xe9ho-skriptu",children:"Spustenie in\u0161tala\u010dn\xe9ho skriptu"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Upozornenie"}),": Tento proces m\xf4\u017ee trva\u0165 2-4 hodiny. Uistite sa o stabilnom nap\xe1jan\xed a nepreru\u0161ujte proces."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"chmod +x ./OpenCV-4-11-0.sh\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"./OpenCV-4-11-0.sh\n"})}),"\n",(0,s.jsx)(n.p,{children:"Skript bude:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"In\u0161talova\u0165 v\u0161etky potrebn\xe9 z\xe1vislosti"}),"\n",(0,s.jsx)(n.li,{children:"Stiahnu\u0165 zdrojov\xfd k\xf3d OpenCV"}),"\n",(0,s.jsx)(n.li,{children:"Konfigurova\u0165 build s podporou CUDA"}),"\n",(0,s.jsx)(n.li,{children:"Kompilova\u0165 OpenCV (toto trv\xe1 najdlh\u0161ie)"}),"\n",(0,s.jsx)(n.li,{children:"In\u0161talova\u0165 skompilovan\xe9 kni\u017enice"}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"overenie-in\u0161tal\xe1cie",children:"Overenie in\u0161tal\xe1cie"}),"\n",(0,s.jsx)(n.p,{children:"Po dokon\u010den\xed in\u0161tal\xe1cie overte OpenCV s podporou CUDA:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"python3 -c \"import cv2; print('OpenCV version:', cv2.__version__); print('CUDA devices:', cv2.cuda.getCudaEnabledDeviceCount())\"\n"})}),"\n",(0,s.jsx)(n.p,{children:"Mali by ste vidie\u0165 v\xfdstup podobn\xfd tomuto:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"OpenCV version: 4.11.1\nCUDA devices: 1\n"})}),"\n",(0,s.jsx)(n.h3,{id:"krok-2-konfigur\xe1cia-prostredia",children:"Krok 2: Konfigur\xe1cia prostredia"}),"\n",(0,s.jsx)(n.p,{children:"Uistite sa, \u017ee je in\u0161tal\xe1cia OpenCV spr\xe1vne nakonfigurovan\xe1 vo va\u0161om DonkeyCar prostred\xed:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"source ~/env/bin/activate\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd ~/mycar\n"})}),"\n",(0,s.jsx)(n.p,{children:"Otestujte OpenCV vo va\u0161om virtu\xe1lnom prostred\xed:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"python3 -c \"import cv2; print('OpenCV loaded successfully with version:', cv2.__version__)\"\n"})}),"\n",(0,s.jsx)(n.h2,{id:"krok-3-nastavenie-yolov4-tiny",children:"Krok 3: Nastavenie YOLOv4-Tiny"}),"\n",(0,s.jsx)(n.p,{children:"Teraz prid\xe1me model detekcie objektov YOLOv4-Tiny do v\xe1\u0161ho DonkeyCar nastavenia."}),"\n",(0,s.jsx)(n.h3,{id:"vytvorenie-adres\xe1ra-modelov",children:"Vytvorenie adres\xe1ra modelov"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd ~/mycar\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mkdir -p models\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd models\n"})}),"\n",(0,s.jsx)(n.h3,{id:"stiahnutie-s\xfaborov-yolov4-tiny",children:"Stiahnutie s\xfaborov YOLOv4-Tiny"}),"\n",(0,s.jsx)(n.p,{children:"Stiahnite predtr\xe9novan\xe9 s\xfabory modelu YOLOv4-Tiny:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"wget https://github.com/AlexeyAB/darknet/releases/download/darknet_yolo_v3_optimal/yolov4-tiny.weights\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"wget https://raw.githubusercontent.com/AlexeyAB/darknet/master/cfg/yolov4-tiny.cfg\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"wget https://raw.githubusercontent.com/AlexeyAB/darknet/master/data/coco.names\n"})}),"\n",(0,s.jsx)(n.h3,{id:"overenie-s\xfaborov-modelu",children:"Overenie s\xfaborov modelu"}),"\n",(0,s.jsx)(n.p,{children:"Skontrolujte, \u010di s\xfa v\u0161etky po\u017eadovan\xe9 s\xfabory pr\xedtomn\xe9:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ls -la ~/mycar/models/\n"})}),"\n",(0,s.jsx)(n.p,{children:"Mali by ste vidie\u0165:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"yolov4-tiny.weights"})," (pribli\u017ene 23MB)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"yolov4-tiny.cfg"})," (konfigura\u010dn\xfd s\xfabor)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"coco.names"})," (s\xfabor so \u0161t\xedtkami tried)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"test-detekcie-objektov",children:"Test detekcie objektov"}),"\n",(0,s.jsx)(n.p,{children:"Otestujte spusten\xedm webov\xe9ho rozhrania DonkeyCar:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd ~/mycar\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"python manage.py drive\n"})}),"\n",(0,s.jsx)(n.p,{children:"Mali by ste vidie\u0165 detekciu objektov v kamerovom feed-e vo webovom rozhran\xed."}),"\n",(0,s.jsx)(n.h2,{id:"tipy-na-v\xfdkon",children:"Tipy na v\xfdkon"}),"\n",(0,s.jsx)(n.h3,{id:"optimaliz\xe1cia-pre-v\xfdkon-v-re\xe1lnom-\u010dase",children:"Optimaliz\xe1cia pre v\xfdkon v re\xe1lnom \u010dase"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Ladenie rozl\xed\u0161enia"}),": Vyv\xe1\u017ete presnos\u0165 a r\xfdchlos\u0165 \xfapravou vstupn\xe9ho rozl\xed\u0161enia"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Frekvencia detekcie"}),": Sp\xfa\u0161\u0165ajte detekciu ka\u017ed\xfdch nieko\u013eko sn\xedmok namiesto ka\u017edej sn\xedmky"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Spracovanie ROI"}),": Spracov\xe1vajte len oblasti z\xe1ujmu v obr\xe1zku"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"rie\u0161enie-probl\xe9mov",children:"Rie\u0161enie probl\xe9mov"}),"\n",(0,s.jsx)(n.h3,{id:"probl\xe9my-s-in\u0161tal\xe1ciou-opencv",children:"Probl\xe9my s in\u0161tal\xe1ciou OpenCV"}),"\n",(0,s.jsx)(n.p,{children:"Ak in\u0161tala\u010dn\xfd skript zlyh\xe1:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Nedostato\u010dn\xe9 \xfalo\u017eisko"}),": Uistite sa, \u017ee m\xe1te aspo\u0148 16GB vo\u013en\xe9ho miesta"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Probl\xe9my s pam\xe4\u0165ou"}),": Zv\xfd\u0161te ve\u013ekos\u0165 swap s\xfaboru"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Probl\xe9my s nap\xe1jan\xedm"}),": Pou\u017eite adekv\xe1tne nap\xe1janie"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"cuda-nefunguje",children:"CUDA nefunguje"}),"\n",(0,s.jsx)(n.p,{children:"Ak CUDA akceler\xe1cia nefunguje:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Skontrolujte in\u0161tal\xe1ciu CUDA\nnvcc --version\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Overte cuDNN\ncat /usr/local/cuda/include/cudnn_version.h | grep CUDNN_MAJOR -A 2\n"})}),"\n",(0,s.jsx)(n.h3,{id:"chyby-na\u010d\xedtania-modelu",children:"Chyby na\u010d\xedtania modelu"}),"\n",(0,s.jsx)(n.p,{children:"Ak sa YOLO modely nedaj\xfa na\u010d\xedta\u0165:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Overte integritu s\xfaborov:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"md5sum ~/mycar/models/yolov4-tiny.weights\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Skontrolujte opr\xe1vnenia s\xfaborov:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"chmod 644 ~/mycar/models/*\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"referencie",children:"Referencie"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/Qengineering/Install-OpenCV-Jetson-Nano",children:"Qengineering OpenCV in\u0161tala\u010dn\xfd skript"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://arxiv.org/abs/2004.10934",children:"YOLOv4-Tiny \u010dl\xe1nok"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.opencv.org/master/d2/d58/tutorial_table_of_content_dnn.html",children:"OpenCV DNN modul dokument\xe1cia"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://developer.nvidia.com/embedded/jetson-nano-developer-kit",children:"NVIDIA Jetson Nano Developer Kit"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>l});var a=i(6540);const s={},o=a.createContext(s);function r(e){const n=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);