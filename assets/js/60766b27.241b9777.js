"use strict";(self.webpackChunkfei_jetracer_docs=self.webpackChunkfei_jetracer_docs||[]).push([[179],{1366:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/rviz_IMU2-cca8838b26116443a431b743db6bedce.png"},1887:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/motor_chart_topic-d6544f5966620bed6252bc036dcf4551.png"},2868:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/TF_tree-b2bd3ced1c1cf68d8b668caed5005c69.png"},2920:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/rviz_TF-808f731f8a6e0a5f08cdf9d96404d174.png"},3481:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>l,frontMatter:()=>s,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"node-topics/node_topics","title":"View Node Topics With ROS","description":"Step 1: Check Node Topics","source":"@site/docs/node-topics/node_topics.md","sourceDirName":"node-topics","slug":"/node-topics/node_topics","permalink":"/FEI_jetracer/docs/node-topics/node_topics","draft":false,"unlisted":false,"editUrl":"https://github.com/peter115342/FEI_jetracer/tree/main/fei-jetracer-docs/docs/node-topics/node_topics.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Robot Movement Control","permalink":"/FEI_jetracer/docs/movement-control/movement_control"},"next":{"title":"FEI DonkeyCar Installation on Jetson Nano","permalink":"/FEI_jetracer/docs/FEIcar/FEIcar_installation"}}');var i=o(4848),r=o(8453);const s={sidebar_position:7},a="View Node Topics With ROS",c={},d=[{value:"Step 1: Check Node Topics",id:"step-1-check-node-topics",level:2},{value:"Step 2: Display data waveform via rqt-plot",id:"step-2-display-data-waveform-via-rqt-plot",level:2},{value:"Step 3: Adjust PID parameters through rqt-reconfigure",id:"step-3-adjust-pid-parameters-through-rqt-reconfigure",level:2},{value:"Step 4: View robot odometer information via RVIZ image tool",id:"step-4-view-robot-odometer-information-via-rviz-image-tool",level:2},{value:"Step 5: View coordinate relationship by TF tree",id:"step-5-view-coordinate-relationship-by-tf-tree",level:2},{value:"Step 6: View Robot IMU Information via RVIZ Image Tool",id:"step-6-view-robot-imu-information-via-rviz-image-tool",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Cannot See Any Topics",id:"cannot-see-any-topics",level:3},{value:"rqt_plot Shows No Data",id:"rqt_plot-shows-no-data",level:3},{value:"RVIZ Display Issues",id:"rviz-display-issues",level:3},{value:"References",id:"references",level:2}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"view-node-topics-with-ros",children:"View Node Topics With ROS"})}),"\n",(0,i.jsx)(t.h2,{id:"step-1-check-node-topics",children:"Step 1: Check Node Topics"}),"\n",(0,i.jsx)(t.p,{children:"Connect SSH to the robot to open the terminal and enter the following command to enable the robot chassis node.\n\u3010Note: The robot chassis node cannot be restarted repeatedly, otherwise an error occurs. If the previous chassis node is not closed, it does not need to be restarted.\u3011"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"roslaunch jetracer jetracer.launch    #Start the robot chassis node\n"})}),"\n",(0,i.jsx)(t.p,{children:"Open the Ubuntu virtual machine terminal and enter the following command in the terminal to view the topic of the chassis node."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"rostopic list\n"})}),"\n",(0,i.jsx)(t.p,{children:"If the content shown in the figure below appears after running the code, it means that the multi-device communication is successful; if it cannot be connected, recheck whether the IP and hostname in the above steps are incorrect or whether they are connected to the same WiFi."}),"\n",(0,i.jsx)(t.p,{children:"The topics you should see include:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"/cmd_vel is the topic of robot motion speed and is controlled by itself."}),"\n",(0,i.jsx)(t.li,{children:"/imu is the robot IMU topic."}),"\n",(0,i.jsx)(t.li,{children:"/motor/* topics indicate the actual encoded speed and set the speed of the left and right motors."}),"\n",(0,i.jsx)(t.li,{children:"/odom encodes the odometer for the robot."}),"\n",(0,i.jsx)(t.li,{children:"/odom_combined is the robot fusion odometer, which is obtained by combining the encoded odometer with IMU data."}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"step-2-display-data-waveform-via-rqt-plot",children:"Step 2: Display data waveform via rqt-plot"}),"\n",(0,i.jsx)(t.p,{children:"You can run the following command in the virtual machine terminal to open the data waveform display tool."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"rosrun rqt_plot rqt_plot\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Enter the topic of the motor in /Topic, and click + to add a topic to display the data waveform of the current motor.\nUse the keyboard or remote control handle to control the movement of the robot to observe the changes of the motor curve. \u3010When there is a problem with the motor operation, you can also check the waveform for abnormalities.\u3011\n",(0,i.jsx)(t.img,{alt:"Chassis Node Output",src:o(1887).A+"",width:"1238",height:"639"})]}),"\n",(0,i.jsx)(t.p,{children:"In the rqt_plot display, /motor/lset and /motor/rset represent the encoded speed set by the left and right motors, and /motor/lvel and /motor/rvel represent the encoded speed of the left and right motors actually running. This encoding speed indicates the number of pulses output by the encoder in one cycle."}),"\n",(0,i.jsx)(t.h2,{id:"step-3-adjust-pid-parameters-through-rqt-reconfigure",children:"Step 3: Adjust PID parameters through rqt-reconfigure"}),"\n",(0,i.jsx)(t.p,{children:"You can run the following command in the virtual machine terminal to open the parameter adjustment tool."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"rosrun rqt_reconfigure rqt_reconfigure\n"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"PID parameters",src:o(7865).A+"",width:"741",height:"496"})}),"\n",(0,i.jsx)(t.p,{children:"In the pop-up window, click the PID node on the left, and the PID parameters on the right can be dynamically modified according to your own preferences.\nl_p, l_i, and l_d represent the PID parameters of the left wheel motor, and r_p, r_i, and r_d represent the PID parameters of the right wheel motor.\nUsually we set P from large to small."}),"\n",(0,i.jsx)(t.h2,{id:"step-4-view-robot-odometer-information-via-rviz-image-tool",children:"Step 4: View robot odometer information via RVIZ image tool"}),"\n",(0,i.jsx)(t.p,{children:"You can run the following command in the virtual machine terminal to open the RVIZ tool."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"rosrun rviz rviz\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Click the Add button at the bottom left, select TF, and click OK to add the TF topic.\n",(0,i.jsx)(t.img,{alt:"Rviz TF",src:o(2920).A+"",width:"800",height:"554"})]}),"\n",(0,i.jsxs)(t.p,{children:["Click Fixed Frame and select 'odom', you can see three TF coordinates, control the car to move forward , and you can see that the base_footprint and base_imu_link coordinates also move at the same time.\nOdom can be understood as the original position of the robot, base_footprint is the robot coordinates, and base_imu_link is the robot IMU coordinates.\n",(0,i.jsx)(t.img,{alt:"Odom Fixed Frame",src:o(5569).A+"",width:"800",height:"654"})]}),"\n",(0,i.jsx)(t.p,{children:"Note: If the base_footprint coordinate keeps rotating, it is because the chassis master is not in a static state on the plane when it is started, and the IMU calibration data is inaccurate. Put the car on the plane and do not move, then press the reset button to restart the chassis master for a while and then run the node program."}),"\n",(0,i.jsx)(t.h2,{id:"step-5-view-coordinate-relationship-by-tf-tree",children:"Step 5: View coordinate relationship by TF tree"}),"\n",(0,i.jsx)(t.p,{children:"You can run the following command in the virtual machine terminal to open the TF relationship visualization tools."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"rosrun rqt_tf_tree rqt_tf_tree\n"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Coordinates relationship in a TF tree",src:o(2868).A+"",width:"474",height:"526"})}),"\n",(0,i.jsx)(t.p,{children:"Click the Refresh button on the left to display the TF relationship tree of the robot.\nFrom this we can see that the robot coordinate system relationship is map->odom->base_link, in which map is the map coordinate system, odom is the odometer coordinate system published by the robot, and base_link is the robot's reference coordinate system."}),"\n",(0,i.jsx)(t.h2,{id:"step-6-view-robot-imu-information-via-rviz-image-tool",children:"Step 6: View Robot IMU Information via RVIZ Image Tool"}),"\n",(0,i.jsx)(t.p,{children:"You can run the following command in the virtual machine terminal to open the RVIZ tool."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"rosrun rviz rviz\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Click the Add button at the bottom left, select Imu, and click OK to add the IMU topic.\n",(0,i.jsx)(t.img,{alt:"IMU view in Rviz",src:o(4070).A+"",width:"800",height:"553"})]}),"\n",(0,i.jsxs)(t.p,{children:['Now you can add a display item, add Axes, and set the reference frame to imu_link.\nImu Topic choose "/imu" to view the IMU information, choose Enable box to display the box and check to Enable axes to display the coordinates. Check Enable acceleration to display the arrow. Set Acc. vector scale as 0.2 to minimize the arrow.\n',(0,i.jsx)(t.img,{alt:"IMU box view in Rviz",src:o(1366).A+"",width:"800",height:"498"})]}),"\n",(0,i.jsx)(t.p,{children:"Rotate the car and the box will rotate too."}),"\n",(0,i.jsx)(t.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(t.h3,{id:"cannot-see-any-topics",children:"Cannot See Any Topics"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Verify the ROS master node is running on the Jetson Nano"}),"\n",(0,i.jsx)(t.li,{children:"Check network connectivity between VM and Jetson Nano"}),"\n",(0,i.jsx)(t.li,{children:"Confirm that ROS environment variables are properly set"}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"rqt_plot-shows-no-data",children:"rqt_plot Shows No Data"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Make sure the correct topic is selected"}),"\n",(0,i.jsx)(t.li,{children:"Verify the robot chassis node is running"}),"\n",(0,i.jsx)(t.li,{children:"Check if sensors are properly connected and functioning"}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"rviz-display-issues",children:"RVIZ Display Issues"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Make sure you have selected the correct fixed frame"}),"\n",(0,i.jsx)(t.li,{children:"Check if transforms are being published properly"}),"\n",(0,i.jsx)(t.li,{children:"Verify the topic data format matches the visualization tool expectations"}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"references",children:"References"}),"\n",(0,i.jsxs)(t.p,{children:["For more detailed instructions, refer to the ",(0,i.jsx)(t.a,{href:"https://www.waveshare.com/wiki/JetRacer_ROS_AI_Kit_Tutorial_VI:_View_Node_Topics_With_ROS",children:"official Waveshare JetRacer ROS AI Kit Tutorial VI: View Node Topics With ROS"}),"."]})]})}function l(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},4070:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/rviz_IMU-e15e93b9f732c24fcdd6342573d9b8c0.png"},5569:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/rviz_TF2-dec71900cb1316d4f2455be7edcaf328.png"},7865:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/PID_params-85c38a8665c38289f99966636cf5bcd7.png"},8453:(e,t,o)=>{o.d(t,{R:()=>s,x:()=>a});var n=o(6540);const i={},r=n.createContext(i);function s(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);